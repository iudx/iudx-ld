{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "@context": {
        "entityIdSchema": "https://raw.githubusercontent.com/rraks/iudx-ld/master/base_schemas/iudx_base.jsonld#/properties/entityIdSchema",
        "itemStatusSchema": "https://raw.githubusercontent.com/rraks/iudx-ld/master/base_schemas/iudx_base.jsonld#/properties/itemStatusSchema",
        "itemTypeSchema": "https://raw.githubusercontent.com/rraks/iudx-ld/master/base_schemas/iudx_base.jsonld#/properties/itemTypeSchema",
        "refToAnotherItemSchema": "https://raw.githubusercontent.com/rraks/iudx-ld/master/base_schemas/iudx_base.jsonld#/properties/refToAnotherItemSchema",
        "refToDataModelItemSchema": "https://raw.githubusercontent.com/rraks/iudx-ld/master/base_schemas/iudx_base.jsonld#/properties/refToDataModelItemSchema",
        "refToProviderItemSchema": "https://raw.githubusercontent.com/rraks/iudx-ld/master/base_schemas/iudx_base.jsonld#/properties/refToProviderItemSchema",
        "refToResourceServerItemSchema": "https://raw.githubusercontent.com/rraks/iudx-ld/master/base_schemas/iudx_base.jsonld#/properties/refToResourceServerItemSchema",
        "resourceDataSchema": "https://raw.githubusercontent.com/rraks/iudx-ld/master/base_schemas/iudx_base.jsonld#/properties/resourceDataSchema",
        "sharingTypeSchema": "https://raw.githubusercontent.com/rraks/iudx-ld/master/base_schemas/iudx_base.jsonld#/properties/sharingTypeSchema",
        "tagsSchema": "https://raw.githubusercontent.com/rraks/iudx-ld/master/base_schemas/iudx_base.jsonld#/properties/tagsSchema"
    },
    "allOf": [
        {
            "$ref": "https://raw.githubusercontent.com/rbccps-iisc/iudx-schemas/master/base_schemas/v0.0.1/iudx_item_schema.json#"
        }
    ],
    "describes": "Schema of catalog entries with associated data resources.",
    "properties": {
        "entityIdSchema": {
            "properties": {
                "entityContactEmail": {
                    "describes": "Email contact address for this entity",
                    "format": "email",
                    "type": "string"
                },
                "entityContactPhone": {
                    "describes": "Contact Phone number for this entity",
                    "type": "string"
                },
                "entityId": {
                    "describes": "ID of the Entity. Should be unique within this IUDX exchange.",
                    "type": "string"
                },
                "entityIdentityProviderURL": {
                    "describes": "Describes the link to the identity provide for this entity",
                    "format": "uri",
                    "type": "string"
                },
                "entityIdentityType": {
                    "describes": "Format of Identification token for the entity. For example: X509, OpenIDConnect etc.",
                    "type": "string"
                },
                "entityURL": {
                    "describes": "Web page for this entity",
                    "format": "uri",
                    "type": "string"
                }
            },
            "required": [
                "entityId",
                "entityIdentityType",
                "entityIdentityProviderURL"
            ],
            "type": "object"
        },
        "itemStatusSchema": {
            "describes": "Status of an item. In production version of catalogue, for purposes of provenance, one can choose to not delete an item but set its status to 'deprecated'. All the older versions of an updated item may be persisted by setting their status as 'deprecated'. Only the current item containing latest updates should have status set to 'active'.",
            "enum": [
                "active",
                "deprecated"
            ],
            "type": "string"
        },
        "itemTypeSchema": {
            "describes": "Type of an item. Schema or an information document.",
            "enum": [
                "data-model",
                "provider",
                "resource-server",
                "resource-item",
                "tags-item",
                "access-object",
                "base-schema",
                "catalogue-item"
            ],
            "type": "string"
        },
        "refToAnotherItemSchema": {
            "describes": "Attributes describing the link to another item",
            "properties": {
                "describes": {
                    "describes": "Describes the contents of item to which link is being provided",
                    "type": "string"
                },
                "refItemId": {
                    "describes": "Contains 'id' of the item being referred to. 'id' is of type UUID",
                    "type": "string"
                },
                "refItemURL": {
                    "describes": "Contains URL link for the item being referred to.",
                    "format": "uri",
                    "type": "string"
                }
            },
            "type": "object"
        },
        "refToDataModelItemSchema": {
            "allOf": [
                {
                    "$ref": "#/definitions/refToAnotherItemSchema"
                }
            ],
            "properties": {
                "refItemName": {
                    "describes": "Name of the data model.",
                    "type": "string"
                },
                "refItemType": {
                    "enum": [
                        "data-model"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "refItemId",
                "refItemName"
            ],
            "type": "object"
        },
        "refToProviderItemSchema": {
            "allOf": [
                {
                    "$ref": "#/definitions/refToAnotherItemSchema"
                }
            ],
            "properties": {
                "refItemName": {
                    "describes": "Name of the provider.",
                    "type": "string"
                },
                "refItemType": {
                    "enum": [
                        "provider"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "refItemName",
                "refItemId"
            ],
            "type": "object"
        },
        "refToResourceServerItemSchema": {
            "allOf": [
                {
                    "$ref": "#/definitions/refToAnotherItemSchema"
                }
            ],
            "properties": {
                "refItemName": {
                    "describes": "Name of the resource server.",
                    "type": "string"
                },
                "refItemType": {
                    "enum": [
                        "resource-server"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "refItemId",
                "refItemName"
            ],
            "type": "object"
        },
        "resourceDataSchema": {
            "accessInformation": {
                "describes": "List of access mechanisms available for data associated with this catalog item",
                "items": {
                    "properties": {
                        "accessObject": {
                            "oneOf": [
                                {
                                    "describes": "Link to an object (api JSON object, or a json-schema) to describe access mechanism for this data resource.",
                                    "title": "Link to API/JSON-schema object",
                                    "type": "string"
                                },
                                {
                                    "describes": "An object (api JSON object, or a json-schema) to describe access mechanism for this data resource. For example, an OpenAPI JSON object can be used to describe APIs for interacting with this resource. ",
                                    "title": "Embedded API/JSON-schema object",
                                    "type": "object"
                                }
                            ]
                        },
                        "accessObjectType": {
                            "describes": "Type of access mechanism. For example, 'openAPI', 'asyncAPI', 'custom'. Can be changed to ENUM later.",
                            "type": "string"
                        },
                        "accessObjectURL": {
                            "describes": "URL that has more information about meta-data of this resource",
                            "format": "uri",
                            "type": "string"
                        },
                        "accessVariables": {
                            "describes": "Object describing some of the instance specific variables used in API objects or objects specified by access schema for this resource",
                            "patternProperties": {
                                "[a-zA-Z0-9]+$": {
                                    "type": "string"
                                }
                            },
                            "type": "object"
                        },
                        "resourceType": {
                            "describes": "Type of data resource",
                            "enum": [
                                "table",
                                "file",
                                "message",
                                "messageStream",
                                "gis",
                                "media",
                                "service",
                                "other"
                            ],
                            "type": "string"
                        }
                    },
                    "required": [
                        "accessObjectType",
                        "accessObject"
                    ],
                    "type": "object"
                },
                "type": "array"
            },
            "properties": {
                "description": {
                    "type": "string"
                },
                "properties": {
                    "patternProperties": {
                        "[a-zA-Z0-9]+$": {
                            "type": "object"
                        }
                    },
                    "type": "object"
                },
                "type": {
                    "type": [
                        "string",
                        "array"
                    ]
                },
                "units": {
                    "describes": "units for the measured quantity if applicable",
                    "type": "string"
                }
            },
            "resourceGroup": {
                "describes": "Identifier/Name for the resource group (category/class) to which this resource belongs. This resource group category/class is defined by the resource server. All resource-items belonging to a resourceGroup should have same data model and should serve same data using same access objects.",
                "type": "string"
            },
            "resourceId": {
                "describes": "Id of the resource on the resource-server. It should be unique on the resource-server.",
                "type": "string"
            },
            "resourceServer": {
                "$ref": "https://raw.githubusercontent.com/rbccps-iisc/iudx-schemas/master/base_schemas/v0.0.1/iudx_base_def.json#/definitions/refToResourceServerItemSchema"
            },
            "type": "object"
        },
        "sharingTypeSchema": {
            "enum": [
                "public",
                "private",
                "protected",
                "confidential"
            ],
            "type": "string"
        },
        "tagsSchema": {
            "describes": "Any strings which annotate this resource. It intends to provide discovery hints.",
            "items": {
                "type": "string"
            },
            "minItems": 0,
            "type": "array",
            "uniqueItems": true
        }
    },
    "type": "object"
}